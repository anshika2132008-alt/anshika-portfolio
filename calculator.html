<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Calculator — Portfolio Project</title>
  <style>
    :root{--bg:#f3f7fb;--panel:#ffffff;--accent:#2b6cb0;--muted:#6b7280}
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family:Segoe UI, Roboto, Arial, sans-serif;background:var(--bg);color:#6b629f}

    .calculator{max-width:360px;margin:3rem auto;padding:1rem;border-radius:12px;background:var(--panel);box-shadow:0 6px 20px rgba(12,17,35,.08)}
    .display{background:#0f1720;color:#f991e6;padding:1.25rem;border-radius:8px;font-size:1.75rem;text-align:right;margin-bottom:1rem;min-height:56px}
    .keys{display:grid;grid-template-columns:repeat(4,1fr);gap:.5rem}
    .key{padding:.9rem;font-size:1.1rem;border-radius:8px;border:0;background:#e9e7ea;cursor:pointer}
    .key.operator{background:var(--accent);color:#fff}
    .key.equal{grid-column:4 / 5;background:#0ea5a4;color:#fff}
    .key.zero{grid-column:1 / 3}
    .back-link{margin-top:1rem;text-align:center}
    .back-link a{color:var(--accent);text-decoration:none}
    @media (max-width:420px){.calculator{margin:1rem}}
  </style>
</head>

<body>
  <main class="calculator" role="application" aria-label="Calculator">
    <div class="display" id="display" aria-live="polite">0</div>

    <div class="keys">
      <button class="key" data-action="clear">C</button>
      <button class="key" data-action="toggle-sign">±</button>
      <button class="key" data-action="percent">%</button>
      <button class="key operator" data-action="operator">÷</button>

      <button class="key">7</button>
      <button class="key">8</button>
      <button class="key">9</button>
      <button class="key operator" data-action="operator">×</button>

      <button class="key">4</button>
      <button class="key">5</button>
      <button class="key">6</button>
      <button class="key operator" data-action="operator">−</button>

      <button class="key">1</button>
      <button class="key">2</button>
      <button class="key">3</button>
      <button class="key operator" data-action="operator">+</button>

      <button class="key zero">0</button>
      <button class="key">.</button>
      <button class="key equal" data-action="calculate">=</button>
    </div>

    <p class="back-link"><a href="portfolio.html">← Back to projects</a></p>
  </main>

  <script>
    document.addEventListener('DOMContentLoaded', function () {
      var display = document.getElementById('display');
      var keys = document.querySelectorAll('.key');

      var firstValue = null;
      var operator = null;
      var waitingForSecond = false;

      function inputDigit(digit) {
        if (waitingForSecond) {
          display.textContent = digit;
          waitingForSecond = false;
        } else {
          display.textContent = display.textContent === '0'
            ? digit
            : display.textContent + digit;
        }
      }

      function inputDecimal() {
        if (waitingForSecond) {
          display.textContent = '0.';
          waitingForSecond = false;
          return;
        }
        if (!display.textContent.includes('.')) {
          display.textContent += '.';
        }
      }

      function calculate(n1, op, n2) {
        n1 = parseFloat(n1);
        n2 = parseFloat(n2);

        if (op === '+') return (n1 + n2).toString();
        if (op === '−' || op === '-') return (n1 - n2).toString();
        if (op === '×' || op === '*') return (n1 * n2).toString();
        if (op === '÷' || op === '/') return n2 === 0 ? 'Error' : (n1 / n2).toString();

        return n2.toString();
      }

      keys.forEach(function (key) {
        key.addEventListener('click', function () {
          var action = key.dataset.action;
          var keyContent = key.textContent;

          if (!action) {
            if (keyContent === '.') inputDecimal();
            else inputDigit(keyContent);
            return;
          }

          if (action === 'clear') {
            display.textContent = '0';
            firstValue = null;
            operator = null;
            waitingForSecond = false;
            return;
          }

          if (action === 'toggle-sign') {
            if (display.textContent !== '0') {
              display.textContent =
                display.textContent.startsWith('-')
                  ? display.textContent.slice(1)
                  : '-' + display.textContent;
            }
            return;
          }

          if (action === 'percent') {
            display.textContent = (parseFloat(display.textContent) / 100).toString();
            return;
          }

          if (action === 'operator') {
            if (!firstValue) {
              firstValue = display.textContent;
            } else if (operator && !waitingForSecond) {
              firstValue = calculate(firstValue, operator, display.textContent);
              display.textContent = firstValue;
            }
            operator = keyContent;
            waitingForSecond = true;
            return;
          }

          if (action === 'calculate') {
            if (!operator || !firstValue) return;
            var result = calculate(firstValue, operator, display.textContent);
            display.textContent = result;
            firstValue = null;
            operator = null;
            waitingForSecond = false;
            return;
          }
        });
      });
    });
  </script>
</body>
</html>